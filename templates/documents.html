<form id="documents-form" autocomplete="off">
  <!-- Estilos específicos para a página de documentos -->
  <style>
    /* Forçar o grid a ter o layout correto */
    #documentsList .grid {
      display: grid !important;
      grid-template-columns: repeat(24, minmax(0, 1fr)) !important;
    }
    /* Garantir que o campo de pesquisa ocupe o espaço correto */
    #documentsList .md\:col-span-23 {
      grid-column: span 23 / span 23 !important;
      width: 100% !important;
    }
    /* Garantir que o botão fique no lugar certo */
    #documentsList .md\:col-span-1 {
      grid-column: span 1 / span 1 !important;
      display: flex !important;
      justify-content: center !important;
      align-items: center !important;
    }
    /* Garantir que todos os campos tenham largura total */
    #documentsList input,
    #documentsList textarea,
    #documentsList select {
      width: 100% !important;
    }
  </style>

  <div class="bg-white rounded-2xl shadow p-8 mb-8">
    <div class="flex items-center gap-2 mb-6">
      <i class="fas fa-file-alt text-blue-500 text-2xl"></i>
      <h2 class="text-lg font-semibold text-blue-600">Documentos</h2>
    </div>
    <p class="text-gray-500 mb-6">Documentos mais usados na advocacia previdenciária, com foco em segurado especial e trabalhador rural.</p>

    <!-- Lista de Documentos -->
    <div id="documentsList" class="space-y-4">
      <!-- Primeira linha com botão de adicionar -->
      <div class="documento-item relative mb-4">
        <div class="grid grid-cols-1 md:grid-cols-24 gap-4">
          <!-- Campo de pesquisa -->
          <div class="relative md:col-span-23">
            <input type="text" id="documento-pesquisa" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Pesquisar documentos por palavra-chave...">
            <label for="documento-pesquisa" class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Pesquisar
            </label>
          </div>

          <!-- Botão de adicionar no final da linha -->
          <div class="md:col-span-1 flex items-center justify-center p-0">
            <button type="button" class="add-documento-btn bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 flex items-center justify-center w-8 h-8" title="Adicionar documento">
              <i class="fas fa-plus"></i>
            </button>
          </div>
        </div>
      </div>

      <!-- Área de resultados da pesquisa -->
      <div id="resultados-pesquisa" class="mt-4 hidden">
        <h3 class="text-blue-600 font-semibold mb-2">Resultados da pesquisa</h3>
        <div id="lista-resultados" class="space-y-2 bg-gray-50 p-4 rounded-lg max-h-64 overflow-y-auto">
          <!-- Os resultados da pesquisa serão inseridos aqui dinamicamente -->
        </div>
      </div>

      <!-- Lista de documentos adicionados -->
      <div id="documentos-container" class="space-y-4 my-6">
        <!-- Aqui serão adicionados os documentos -->
      </div>
    </div>
  </div>

  <!-- Observações -->
  <div class="relative mt-8">
    <textarea id="observacoes" rows="3" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Observações sobre os documentos..."></textarea>
    <label for="observacoes" class="absolute left-4 -top-3 px-1 text-sm text-transparent bg-transparent rounded-t-lg rounded-b-none transition-all duration-200 pointer-events-none peer-focus:text-blue-600 peer-focus:-top-3 peer-focus:bg-gray-50 peer-focus:text-blue-600 peer-focus:rounded-t-lg peer-focus:rounded-b-none peer-focus:text-sm peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:bg-transparent peer-placeholder-shown:rounded-none peer-placeholder-shown:text-transparent input-label">
      Observações
    </label>
  </div>
</div>

  <!-- Botões de navegação -->
  <div class="flex justify-between mt-8">
    <button type="button" id="btn-back" class="bg-white hover:bg-gray-100 text-blue-600 font-semibold rounded-lg px-8 py-3 text-base shadow border border-blue-200 transition focus:outline-none focus:ring-2 focus:ring-blue-100 flex items-center gap-2">
      <i class="fas fa-arrow-left"></i> Anterior
    </button>

    <button type="submit" id="btn-save" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg px-8 py-3 text-base shadow transition focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center gap-2">
      <i class="fas fa-save"></i> Salvar
    </button>
  </div>
</form>

<!-- Template para novo documento adicionado -->
<template id="documentoTemplate">
  <div class="documento-adicionado relative p-4 bg-gray-50 rounded-lg shadow-sm mb-4">
    <!-- Cabeçalho do documento -->
    <div class="flex flex-wrap items-center gap-4 mb-3">
      <!-- Nome do documento -->
      <div class="relative flex-grow">
        <input type="text" class="nome-documento peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Nome do documento">
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Nome do Documento
        </label>
      </div>

      <!-- Tipo de documento -->
      <div class="relative w-40">
        <select class="tipo-documento peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
          <option value="">Selecione o tipo</option>
          <option value="declaracao">Declaração</option>
          <option value="certidao">Certidão</option>
          <option value="contrato">Contrato</option>
          <option value="inscricao">Inscrição</option>
          <option value="nota">Nota Fiscal</option>
          <option value="cadastro">Cadastro</option>
          <option value="ficha">Ficha</option>
          <option value="outro">Outro</option>
        </select>
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Tipo
        </label>
      </div>

      <!-- Botão de remover -->
      <div class="flex items-center">
        <button type="button" class="remover-documento bg-red-500 hover:bg-red-600 text-white rounded-full p-1 flex items-center justify-center w-8 h-8" title="Remover documento">
          <i class="fas fa-minus"></i>
        </button>
      </div>
    </div>

    <!-- Campos de conteúdo do documento -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Descrição do documento para petição -->
      <div class="relative">
        <textarea class="descricao-documento peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" rows="3" placeholder="Descreva o documento de forma detalhada para ser utilizado diretamente na petição inicial..."></textarea>
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Descrição para petição inicial
        </label>
      </div>

      <!-- Detalhes adicionais do documento -->
      <div class="relative">
        <textarea class="detalhes-documento peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" rows="3" placeholder="Informações adicionais, número de série, data de emissão, órgão emissor, localização física, etc."></textarea>
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Detalhes do documento
        </label>
      </div>
    </div>
  </div>
</template>

<!-- Scripts -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    if (window.initModule) {
      window.initModule();
    }
  });
</script>

