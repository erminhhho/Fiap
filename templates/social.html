<form id="social-form" autocomplete="off">
  <!-- Card do Perfil Social -->
  <div class="bg-white rounded-2xl shadow p-8 mb-8">
    <div class="mb-8">
      <!-- Título alinhado com a mesma estrutura da página pessoal -->
      <div class="flex items-center mb-4">
        <div class="flex items-center gap-2 flex-grow">
          <i class="fas fa-users text-blue-500 text-2xl"></i>
          <h2 class="text-lg font-semibold text-blue-600">Composição Familiar</h2>
        </div>
        <button type="button" id="adicionar-membro-btn" class="add-familiar-btn bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 flex items-center justify-center w-8 h-8" title="Adicionar membro">
          <i class="fas fa-plus"></i>
        </button>
      </div>

      <!-- Container para os membros da família -->
      <div id="membros-familia-container">
        <!-- Lista de membros da família -->
        <div id="membros-familia-list" class="space-y-6">
          <!-- O assistido será adicionado aqui automaticamente via JS -->
        </div>
      </div>

      <!-- Template para o assistido (primeira linha fixa) -->
      <template id="assistido-template">
        <div class="membro-familia mb-6 relative assistido">
          <div class="grid grid-cols-1 md:grid-cols-24 gap-4">
            <!-- Nome do assistido - 6 colunas (preenchido automaticamente) -->
            <div class="relative md:col-span-6">
              <input type="text" name="familiar_nome[]" id="assistido_nome" class="peer w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-3 text-gray-800 placeholder-gray-400 transition-colors duration-200" readonly />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Nome do Assistido
              </label>
            </div>

            <!-- CPF - 3 colunas (preenchido automaticamente) - reduzido -->
            <div class="relative md:col-span-3">
              <input type="text" name="familiar_cpf[]" id="assistido_cpf" class="peer w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-3 text-gray-800 placeholder-gray-400 transition-colors duration-200" readonly />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                CPF
              </label>
            </div>

            <!-- Idade - 2 colunas (preenchido automaticamente) -->
            <div class="relative md:col-span-2">
              <input type="text" name="familiar_idade[]" id="assistido_idade" class="peer w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-3 text-gray-800 placeholder-gray-400 transition-colors duration-200" readonly />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Idade
              </label>
            </div>

            <!-- Parentesco - 4 colunas (fixo como "Assistido") -->
            <div class="relative md:col-span-4">
              <input type="text" name="familiar_parentesco[]" value="Assistido" class="peer w-full rounded-lg border border-gray-300 bg-gray-100 px-4 py-3 text-gray-800 transition-colors duration-200" readonly />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Parentesco
              </label>
            </div>

            <!-- Estado Civil - 4 colunas (pode ser editado) -->
            <div class="relative md:col-span-4">
              <select name="familiar_estado_civil[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
                <option value="" selected disabled>Selecione...</option>
                <option value="Solteiro(a)">Solteiro(a)</option>
                <option value="Casado(a)">Casado(a)</option>
                <option value="União Estável">União Estável</option>
                <option value="Divorciado(a)">Divorciado(a)</option>
                <option value="Viúvo(a)">Viúvo(a)</option>
              </select>
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Estado Civil
              </label>
            </div>

            <!-- Renda Mensal - 2 colunas (pode ser editado) -->
            <div class="relative md:col-span-2">
              <input type="text" name="familiar_renda[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Renda" />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Renda
              </label>
            </div>

            <!-- CadÚnico - 2 colunas -->
            <div class="relative md:col-span-2 flex items-center justify-center">
              <input type="hidden" name="familiar_cadunico[]" value="Não">
              <button type="button" class="cadunico-btn rounded-lg border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600" title="Possui CadÚnico?">
                CadÚnico
              </button>
            </div>

            <!-- Espaço vazio no lugar do botão de adicionar -->
            <div class="relative md:col-span-1 flex items-center justify-center">
              &nbsp;
            </div>
          </div>
        </div>
      </template>

      <!-- Template para membro da família (oculto) -->
      <template id="membro-familia-template">
        <div class="membro-familia mb-6 relative">
          <div class="grid grid-cols-1 md:grid-cols-24 gap-4">
            <!-- Nome do membro - 6 colunas -->
            <div class="relative md:col-span-6">
              <input type="text" name="familiar_nome[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Nome completo" />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Nome completo
              </label>
            </div>

            <!-- CPF - 3 colunas (reduzido) -->
            <div class="relative md:col-span-3">
              <input type="text" name="familiar_cpf[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="000.000.000-00" oninput="maskCPF(this)" />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                CPF
              </label>
            </div>

            <!-- Idade - 2 colunas -->
            <div class="relative md:col-span-2">
              <input type="text" name="familiar_idade[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Idade" />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Idade
              </label>
            </div>

            <!-- Parentesco - 4 colunas -->
            <div class="relative md:col-span-4">
              <select name="familiar_parentesco[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
                <option value="" selected disabled>Selecione...</option>
                <option value="Cônjuge">Cônjuge</option>
                <option value="Filho(a)">Filho(a)</option>
                <option value="Pai/Mãe">Pai/Mãe</option>
                <option value="Irmão/Irmã">Irmão/Irmã</option>
                <option value="Outro">Outro</option>
              </select>
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Parentesco
              </label>
            </div>

            <!-- Estado Civil - 4 colunas -->
            <div class="relative md:col-span-4">
              <select name="familiar_estado_civil[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
                <option value="" selected disabled>Selecione...</option>
                <option value="Solteiro(a)">Solteiro(a)</option>
                <option value="Casado(a)">Casado(a)</option>
                <option value="União Estável">União Estável</option>
                <option value="Divorciado(a)">Divorciado(a)</option>
                <option value="Viúvo(a)">Viúvo(a)</option>
              </select>
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Estado Civil
              </label>
            </div>

            <!-- Renda Mensal - 2 colunas -->
            <div class="relative md:col-span-2">
              <input type="text" name="familiar_renda[]" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Renda" />
              <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                Renda
              </label>
            </div>

            <!-- CadÚnico - 2 colunas -->
            <div class="relative md:col-span-2 flex items-center justify-center">
              <input type="hidden" name="familiar_cadunico[]" value="Não">
              <button type="button" class="cadunico-btn rounded-lg border border-gray-300 text-gray-500 hover:border-blue-500 hover:text-blue-600" title="Possui CadÚnico?" onclick="toggleCadUnico(this)">
                CadÚnico
              </button>
            </div>

            <!-- Botão de remover (somente nas linhas secundárias) - 1 coluna -->
            <div class="relative md:col-span-1 flex items-center justify-center">
              <button type="button" class="remove-familiar-btn bg-red-500 hover:bg-red-600 text-white rounded-full p-1 ml-2 flex items-center justify-center w-8 h-8" title="Remover membro" onclick="removeSpecificFamilyMember(this)">
                <i class="fas fa-minus"></i>
              </button>
            </div>
          </div>
        </div>
      </template>

      <!-- Observações sobre a situação social -->
      <div class="relative mt-6">
        <textarea id="obs_sociais" name="obs_sociais" rows="3"
          class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200"
          placeholder="Observações relevantes sobre a situação socioeconômica do assistido e sua família..."></textarea>
        <label for="obs_sociais"
          class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none transition-all duration-200 pointer-events-none">
          Observações Sociais
        </label>
      </div>
    </div>
  </div>

  <div class="flex justify-between mt-8">
    <button type="button" class="bg-gray-500 hover:bg-gray-600 text-white font-semibold rounded-lg px-8 py-3 text-base shadow transition focus:outline-none focus:ring-2 focus:ring-gray-300 flex items-center gap-2" id="btn-back">
      <i class="fas fa-arrow-left"></i> Anterior
    </button>
    <button type="button" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg px-8 py-3 text-base shadow transition focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center gap-2" id="btn-next">
      Próximo <i class="fas fa-arrow-right"></i>
    </button>
  </div>
</form>
<!-- Scripts para o social -->
<script src="js/social.js"></script>
