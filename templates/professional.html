<form id="professional-form" autocomplete="off">
  <div class="bg-white rounded-2xl shadow p-8 mb-8">
    <div class="flex items-center justify-between gap-2 mb-6">
      <div class="flex items-center gap-2">
        <i class="fas fa-hands-helping text-blue-500 text-2xl"></i>
        <h2 class="text-lg font-semibold text-blue-600">Atividades Profissionais</h2>
      </div>
      <i class="fas fa-eraser cursor-pointer text-gray-400 hover:text-red-500 transition" title="Limpar seção" onclick="showClearConfirmation(event, 'atividades')"></i>
    </div>

    <!-- Lista de Atividades -->
    <div id="atividadesList" class="space-y-4">
      <!-- Primeira linha com botão de adicionar -->
      <div class="atividade-item relative mb-4">
        <div class="grid grid-cols-1 md:grid-cols-24 gap-4">
          <!-- Tipo de Atividade -->
          <div class="relative md:col-span-6">
            <select name="atividade_tipo[]" class="tipo-atividade peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
              <option value="" selected disabled>Selecione...</option>
              <option value="segurado_especial">Segurado Especial</option>
              <option value="empregado">Empregado (CLT)</option>
              <option value="autonomo">Autônomo</option>
              <option value="empresario">Empresário</option>
              <option value="pescador">Pescador Artesanal</option>
              <option value="domestico">Trabalhador Doméstico</option>
              <option value="informal">Trabalhador Informal</option>
              <option value="outro">Outro...</option>
            </select>
            <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Tipo de Atividade
            </label>
            <!-- Tags como dropdown -->
            <div class="relationship-select" data-selected="Contribuiu" data-value="Contribuiu" onclick="toggleActivityTag(this)">
              <select name="atividade_tag_status[]" class="activity-tag" onchange="updateActivityTag(this)">
                <option value="Contribuiu">Contribuiu</option>
                <option value="Pagou Guia">Pagou Guia</option>
                <option value="Subsistência">Subsistência</option>
                <option value="Sem Contribuição">Sem Contribuição</option>
              </select>
            </div>
          </div>

          <!-- Período -->
          <div class="relative md:col-span-5">
            <div class="grid grid-cols-2 gap-3">
              <div class="relative">
                <input name="atividade_periodo_inicio[]" type="number" class="periodo-inicio peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Início" min="1900" max="2100">
                <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                  Início
                </label>
              </div>
              <div class="relative">
                <input name="atividade_periodo_fim[]" type="number" class="periodo-fim peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Fim" min="1900" max="2100">
                <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
                  Fim
                </label>
              </div>
            </div>
            <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Período
            </label>
          </div>

          <!-- Detalhes -->
          <div class="relative md:col-span-12">
            <input name="atividade_detalhes[]" type="text" class="detalhes peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Detalhes da atividade">
            <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Detalhes
            </label>
          </div>

          <!-- Botão de adicionar no final da linha -->
          <div class="md:col-span-1 flex items-center justify-center p-0">
            <button type="button" class="add-atividade-btn bg-blue-500 hover:bg-blue-600 text-white rounded-full p-1 flex items-center justify-center w-8 h-8" title="Adicionar atividade">
              <i class="fas fa-plus"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Observações -->
  <div class="relative mt-8">
    <textarea id="observacoes" rows="3" class="peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 placeholder-gray-400 transition-colors duration-200" placeholder="Observações sobre as atividades profissionais..."></textarea>
    <label for="observacoes" class="absolute left-4 -top-3 px-1 text-sm text-transparent bg-transparent rounded-t-lg rounded-b-none transition-all duration-200 pointer-events-none peer-focus:text-blue-600 peer-focus:-top-3 peer-focus:bg-gray-50 peer-focus:text-blue-600 peer-focus:rounded-t-lg peer-focus:rounded-b-none peer-focus:text-sm peer-placeholder-shown:top-3 peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:bg-transparent peer-placeholder-shown:rounded-none peer-placeholder-shown:text-transparent input-label">
      Observações
    </label>
  </div>
</div>

<div class="flex justify-between mt-8">
  <button type="button" class="bg-white hover:bg-gray-100 text-blue-600 font-semibold rounded-lg px-8 py-3 text-base shadow border border-blue-200 transition focus:outline-none focus:ring-2 focus:ring-blue-100 flex items-center gap-2" id="btn-back">
    <i class="fas fa-arrow-left"></i> Anterior
  </button>
  <button type="button" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg px-8 py-3 text-base shadow transition focus:outline-none focus:ring-2 focus:ring-blue-300 flex items-center gap-2" id="btn-next">
    Próximo <i class="fas fa-arrow-right"></i>
  </button>
</div>
</form>

<!-- Template para nova atividade -->
<template id="atividadeTemplate">
  <div class="atividade-item relative mb-4">
    <div class="grid grid-cols-1 md:grid-cols-24 gap-4">
      <!-- Tipo de Atividade -->
      <div class="relative md:col-span-6">
        <select name="atividade_tipo[]" class="tipo-atividade peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200">
          <option value="" selected disabled>Selecione...</option>
          <option value="segurado_especial">Segurado Especial</option>
          <option value="empregado">Empregado (CLT)</option>
          <option value="autonomo">Autônomo</option>
          <option value="empresario">Empresário</option>
          <option value="pescador">Pescador Artesanal</option>
          <option value="domestico">Trabalhador Doméstico</option>
          <option value="informal">Trabalhador Informal</option>
          <option value="outro">Outro...</option>
        </select>
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Tipo de Atividade
        </label>
        <!-- Tags como dropdown -->
        <div class="relationship-select" data-selected="Contribuiu" data-value="Contribuiu" onclick="toggleActivityTag(this)">
          <select name="atividade_tag_status[]" class="activity-tag" onchange="updateActivityTag(this)">
            <option value="Contribuiu">Contribuiu</option>
            <option value="Pagou Guia">Pagou Guia</option>
            <option value="Subsistência">Subsistência</option>
            <option value="Sem Contribuição">Sem Contribuição</option>
          </select>
        </div>
      </div>

      <!-- Período -->
      <div class="relative md:col-span-5">
        <div class="grid grid-cols-2 gap-3">
          <div class="relative">
            <input name="atividade_periodo_inicio[]" type="number" class="periodo-inicio peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Início" min="1900" max="2100">
            <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Início
            </label>
          </div>
          <div class="relative">
            <input name="atividade_periodo_fim[]" type="number" class="periodo-fim peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Fim" min="1900" max="2100">
            <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
              Fim
            </label>
          </div>
        </div>
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Período
        </label>
      </div>

      <!-- Detalhes -->
      <div class="relative md:col-span-12">
        <input name="atividade_detalhes[]" type="text" class="detalhes peer w-full rounded-lg border border-gray-300 focus:border-blue-600 focus:ring-2 focus:ring-blue-100 px-4 py-3 text-gray-800 bg-gray-50 transition-colors duration-200" placeholder="Detalhes da atividade">
        <label class="absolute left-4 -top-3 px-1 text-sm text-blue-600 bg-gray-50 rounded-t-lg rounded-b-none">
          Detalhes
        </label>
      </div>

      <!-- Botão de remover no final da linha -->
      <div class="md:col-span-1 flex items-center justify-center p-0">
        <button type="button" class="remove-atividade bg-red-500 hover:bg-red-600 text-white rounded-full p-1 flex items-center justify-center w-8 h-8" title="Remover atividade">
          <i class="fas fa-minus"></i>
        </button>
      </div>
    </div>
  </div>
</template>
